{"version":3,"sources":["webpack:///webpack/bootstrap c1a088dacdb7c55ecf49","webpack:///./frontend/tactical_warfare.js","webpack:///./frontend/game.js","webpack:///./frontend/arena.js","webpack:///./frontend/ground.js","webpack:///./frontend/cursor.js","webpack:///./frontend/player.js"],"names":["createScene","canvas","document","getElementById","engine","BABYLON","Engine","scene","Scene","camera","FreeCamera","Vector3","light","HemisphericLight","intensity","window","addEventListener","resize","runRenderLoop","render","startGame","createDemoGame","SceneLoader","ImportMesh","tank1","newMeshes","tank2","createInstance","arena","Player1","Player2","game","Game","players","currentPlayerIdx","myPlayerIdx","receiveMovePosition","bind","receiveMoveType","initialPositionTanks","midX","Math","floor","ground","cellCount","midZ","globalCoordinates","cellIndicesToGlobalCoordinates","tank","position","otherPlayerIdx","matrix","Matrix","RotationAxis","Axis","Y","PI","TransformCoordinates","startListeningForMoveOptions","startListeningForPosition","type","switchPlayer","length","DEFAULT_WALL_THICKNESS","DEFAULT_CELL_SIZE","DEFAULT_CELL_COUNT","DEFAULT_WALL_HEIGHT","DEFAULT_WALL_WIDTH","Arena","cellSize","wallThickness","wallHeight","wallWidth","groundWidth","getGroundWidth","_wallMesh","Mesh","CreateBox","scaling","z","y","x","wallMesh","Ground","mesh","_createGroundMesh","_handleConfirmPosition","_handleListeningForPosition","CreateGround","onDoneCallback","onclick","xIndex","zIndex","indices","_getCellIndices","cursor","e","_createCursor","pickResult","pick","clientX","clientY","name","hit","setDisplayPosition","_getCellCenteredCoordinates","pickedPoint","removeEventListener","gridPosition","dispose","CURSOR_Y_POSITION","Cursor","size","_displayPosition","Zero","_mesh","CreatePlane","material","StandardMaterial","diffuseColor","Color3","alpha","rotation","clone","Player","DemoPlayer","SocketPlayer","LocalPlayer"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c1a088dacdb7c55ecf49","import {Game, createDemoGame} from \"./game.js\";\nconst createScene = function () {\n  const canvas = document.getElementById(\"render-canvas\");\n    const engine = new BABYLON.Engine(canvas, true);\n    var scene = new BABYLON.Scene(engine);\n\n    var camera = new BABYLON.FreeCamera(\"camera1\", new BABYLON.Vector3(0, 5, -20), scene);\n\n    var light = new BABYLON.HemisphericLight(\"light1\", new BABYLON.Vector3(0, 1, 0), scene);\n    light.intensity = 0.7;\n\n    // Our built-in 'ground' shape. Params: name, width, depth, subdivs, scene\n    window.addEventListener('resize', ()=> {\n          engine.resize();\n        });\n        engine.runRenderLoop(()=>{\n          scene.render();\n        });\n    return scene;\n\n};\n\nconst startGame = function startGame(){\n  const scene = createScene();\n  window.scene = scene;\n  createDemoGame(scene);\n  //const tank_mesh = new sand_tank.Cube_001(\"tank1\",scene, \"\");\n};\ndocument.addEventListener(\"DOMContentLoaded\", startGame);\n\n\n\n// WEBPACK FOOTER //\n// ./frontend/tactical_warfare.js","import Arena from \"./arena.js\";\nimport {Player, DemoPlayer, LocalPlayer, SocketPlayer} from \"./player.js\";\nexport const createDemoGame = (scene)=>{\n  BABYLON.SceneLoader.ImportMesh(\"Cube.001\", \"models/tanks/sand_tank/\",\n       \"sand_tank.babylon\", scene, newMeshes=>{\n        const tank1 = newMeshes[0];\n        const tank2 = tank1.createInstance(\"tank2\");\n        const arena = new Arena(scene);\n        const Player1 = new LocalPlayer(tank1, arena);\n        const Player2 = new DemoPlayer(tank2);\n\n        const game = new Game(scene, [Player1, Player2], arena );\n\n        game.startGame();\n\n       });\n};\nexport class Game{\n  constructor(scene, players, arena ){\n    this.players = players;\n    this.currentPlayerIdx = 0;\n    this.myPlayerIdx = 0;\n    this.arena = arena;\n    this.receiveMovePosition = this.receiveMovePosition.bind(this);\n    this.receiveMoveType = this.receiveMoveType.bind(this);\n    this.initialPositionTanks();\n  }\n  initialPositionTanks(){\n    const midX = Math.floor(this.arena.ground.cellCount / 2);\n    const midZ = Math.floor(this.arena.ground.cellCount /4);\n    const globalCoordinates = this.arena.ground.cellIndicesToGlobalCoordinates(\n      [midX, midZ]\n    );\n\n    this.players[this.myPlayerIdx].tank.position = globalCoordinates;\n\n    const otherPlayerIdx = this.myPlayerIdx === 0 ? 1 : 0;\n    const matrix = BABYLON.Matrix.RotationAxis(BABYLON.Axis.Y, Math.PI);\n    this.players[otherPlayerIdx].tank.position = BABYLON.Vector3.TransformCoordinates(\n      globalCoordinates, matrix\n    );\n  }\n  startGame(){\n    this.startListeningForMoveOptions();\n  }\n  startListeningForMoveOptions(){\n    this.players[this.currentPlayerIdx].startListeningForMoveOptions(this.receiveMoveType);\n  }\n  stopListeningForMoveOptions(){\n\n  }\n  startListeningForPosition(){\n    this.players[this.currentPlayerIdx].startListeningForPosition(\n      this.receiveMovePosition);\n  }\n  receiveMoveType(type){\n    switch(type){\n      case \"position\":\n        this.startListeningForPosition();\n        break;\n    }\n  }\n  receiveMovePosition(position){\n    this.players[this.currentPlayerIdx].tank.position = position;\n    this.switchPlayer();\n    this.startListeningForMoveOptions();\n  }\n  startListeningForTrajectory(){\n\n  }\n  stopListeningForTrajectory(){\n\n  }\n\n  switchPlayer(){\n    if(++this.currentPlayerIdx > this.players.length -1){\n      this.currentPlayerIdx = 0;\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./frontend/game.js","import Ground from \"./ground.js\";\n\nconst DEFAULT_WALL_THICKNESS = 1;\nconst DEFAULT_CELL_SIZE = 1.5;\nconst DEFAULT_CELL_COUNT = 8;\nconst DEFAULT_WALL_HEIGHT = 3;\nconst DEFAULT_WALL_WIDTH = 0.6;\n\nexport default class Arena{\n  constructor(scene, cellSize =DEFAULT_CELL_SIZE, cellCount=DEFAULT_CELL_COUNT,\n     wallThickness=DEFAULT_WALL_THICKNESS, wallHeight = DEFAULT_WALL_HEIGHT,\n      wallWidth = DEFAULT_WALL_WIDTH){\n    this.ground = new Ground(scene, cellSize, cellCount, wallThickness);\n    const groundWidth = this.ground.getGroundWidth();\n    this._wallMesh = new BABYLON.Mesh.CreateBox(\"centerWall\",\n      groundWidth, scene);\n    this._wallMesh.scaling.z = wallThickness / groundWidth;\n    this._wallMesh.scaling.y = wallHeight/ groundWidth;\n    this._wallMesh.scaling.x = wallWidth;\n    this._wallMesh.position.y += wallHeight /2;\n    window.wallMesh = this._wallMesh;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./frontend/arena.js","import Cursor from \"./cursor.js\";\nexport default class Ground{\n  constructor(scene,\n              cellSize,\n              cellCount,\n              wallThickness){\n    this.scene = scene;\n    this.cellSize = cellSize;\n    this.cellCount = cellCount;\n    this.wallThickness = wallThickness;\n    this.mesh = this._createGroundMesh();\n    this._handleConfirmPosition = this._handleConfirmPosition.bind(this);\n    this._handleListeningForPosition = this._handleListeningForPosition.bind(this);\n  }\n  _createGroundMesh(){\n    return BABYLON.Mesh.CreateGround(\"ground\", this.cellSize*\n    this.cellCount,\n    this.cellSize*this.cellCount+ this.wallThickness,\n    2, this.scene);\n  }\n  startListeningForPosition(onDoneCallback){\n    document.getElementById('render-canvas').addEventListener(\"mousemove\",\n      this._handleListeningForPosition);\n    document.getElementById(\"render-canvas\").onclick =\n      this._handleConfirmPosition(onDoneCallback);\n  }\n  _getCellIndices(globalCoordinates){\n    const xIndex = Math.floor(\n      (globalCoordinates.x +\n        (this.cellCount * this.cellSize/2)\n      ) / this.cellSize\n    );\n\n    let zIndex =  Math.floor(\n      (globalCoordinates.z + this.wallThickness /2\n\n      ) / this.cellSize * -1\n    );\n    if(zIndex < 0)\n      zIndex = 0;\n    return [xIndex, zIndex];\n\n  }\n  cellIndicesToGlobalCoordinates(indices){\n    let x = indices[0] * this.cellSize + this.cellSize/2 - this.getGroundWidth()/2;\n    let z = -1 * (indices[1] * this.cellSize + this.cellSize/2 + this.wallThickness/2);\n    return new BABYLON.Vector3(x, 0, z);\n  }\n  getGroundWidth(){\n    return this.cellSize * this.cellCount;\n  }\n  _getCellCenteredCoordinates(globalCoordinates){\n    let indices = this._getCellIndices(globalCoordinates);\n    return this.cellIndicesToGlobalCoordinates(indices);\n  }\n  _createCursor(){\n    this.cursor = new Cursor(this.scene, this.cellSize);\n  }\n  _handleListeningForPosition(e){\n    if(!this.cursor){\n      this._createCursor();\n    }\n    const pickResult = this.scene.pick(e.clientX, e.clientY, mesh => {\n      return this.mesh.name ===mesh.name;\n    });\n    if(pickResult.hit){\n      this.cursor.setDisplayPosition(\n        this._getCellCenteredCoordinates(pickResult.pickedPoint)\n      );\n    }\n  }\n  _handleConfirmPosition(onDoneCallback){\n    return e=>{\n      document.getElementById('render-canvas').removeEventListener(\"mousemove\",\n        this._handleListeningForPosition);\n      document.getElementById('render-canvas').onclick = null;\n      const gridPosition = this.cursor.gridPosition();\n      this.cursor.dispose();\n      this.cursor = null;\n      debugger;\n      onDoneCallback(gridPosition);\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./frontend/ground.js","const CURSOR_Y_POSITION = 0.02;\n\n\nexport default class Cursor{\n  constructor(scene, size){\n    this._displayPosition = new BABYLON.Vector3.Zero();\n    this._mesh = new BABYLON.Mesh.CreatePlane(\"cursor\", size, scene);\n    this._mesh.material = new BABYLON.StandardMaterial(\"mat1\", scene);\n    this._mesh.material.diffuseColor = new BABYLON.Color3(0.5, 0, 0);\n    this._mesh.material.alpha = 0.9;\n    this._mesh.rotation.x = Math.PI/2\n  }\n  setDisplayPosition(globalCoordinates){\n    this._mesh.position = globalCoordinates;\n    this._mesh.position.y = CURSOR_Y_POSITION;\n  }\n  gridPosition(){\n    const gridPosition = this._mesh.position.clone();\n    gridPosition.y = 0;\n    return gridPosition;\n  }\n  dispose(){\n    this._mesh.dispose();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./frontend/cursor.js","export class Player{\n  constructor(tank){\n    this.tank = tank;\n  }\n  startListeningForMoveOptions(onDoneCallback){\n    onDoneCallback(\"position\");\n  }\n}\n\nexport class DemoPlayer extends Player{\n  constructor(tank){\n    super(tank);\n  }\n  startListeningForPosition(onDoneCallback){\n    onDoneCallback(this.tank.position);\n  }\n};\n\nexport class SocketPlayer extends Player{\n  constructor(tank){\n    super(tank);\n  }\n}\n\nexport class LocalPlayer extends Player{\n  constructor(tank, arena){\n    super(tank);\n    this.arena = arena;\n  }\n  startListeningForPosition(onDoneCallback){\n    this.arena.ground.startListeningForPosition(onDoneCallback);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./frontend/player.js"],"sourceRoot":""}