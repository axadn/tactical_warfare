!function(e){function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var t={};n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=0)}([function(e,n,t){"use strict";var i=t(1),o=function(){var e=document.getElementById("render-canvas"),n=new BABYLON.Engine(e,!0),t=new BABYLON.Scene(n),i=new BABYLON.FreeCamera("camera1",new BABYLON.Vector3(0,5,-20),t);new BABYLON.HemisphericLight("light1",new BABYLON.Vector3(0,1,0),t).intensity=.7,window.addEventListener("resize",function(){n.resize()}),n.runRenderLoop(function(){t.render()});BABYLON.SceneLoader.ImportMesh("Cube.001","models/tanks/sand_tank/","sand_tank.babylon",t,function(e){i.lockedTarget=e[0]});return t},r=function(){var e=o();window.scene=e,new i.createDemoGame(e).startGame()};document.addEventListener("DOMContentLoaded",r)},function(e,n,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.Game=n.createDemoGame=void 0;var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),s=t(2),a=i(s),u=t(3),c=(i(u),n.createDemoGame=function(e){return new c(e,[],new a.default(e))},n.Game=function(){function e(n,t,i){o(this,e),this.players=t,this.currentPlayerIdx=0,this.myPlayerIdx=0,this.arena=i,this.recieveMovePosition=this.recieveMovePosition.bind(this)}return r(e,[{key:"startGame",value:function(){this.startListeningForPosition()}},{key:"startListeningForMoveOptions",value:function(){}},{key:"stopListeningForMoveOptions",value:function(){}},{key:"startListeningForPosition",value:function(){this.arena.ground.startListeningForPosition()}},{key:"recieveMovePosition",value:function(e){}},{key:"startListeningForTrajectory",value:function(){}},{key:"stopListeningForTrajectory",value:function(){}},{key:"switchPlayer",value:function(){++this.currentPlayerIdx>this.players.length-1&&(this.currentPlayerIdx=0)}}]),e}())},function(e,n,t){"use strict";function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=t(4),r=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.5,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;i(this,e),this.ground=new r.default(n,t,o,s)};n.default=s},function(e,n,t){"use strict";function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function e(){i(this,e)};n.default=o},function(e,n,t){"use strict";function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),r=t(5),s=function(e){return e&&e.__esModule?e:{default:e}}(r),a=function(){function e(n,t,o,r){i(this,e),this.scene=n,this.cellSize=t,this.cellCount=o,this.wallThickness=r,this.mesh=this._createGroundMesh(),this._handleConfirmPosition=this._handleConfirmPosition.bind(this),this._handleListeningForPosition=this._handleListeningForPosition.bind(this)}return o(e,[{key:"_createGroundMesh",value:function(){return BABYLON.Mesh.CreateGround("ground",this.cellSize*this.cellCount*2,this.cellSize*this.cellCount*this.cellCount+this.wallThickness,2,this.scene)}},{key:"startListeningForPosition",value:function(e){document.getElementById("render-canvas").addEventListener("mousemove",this._handleListeningForPosition),document.getElementById("render-canvas").onClick=this._handleConfirmPosition(e)}},{key:"_getCellCenteredCoordinates",value:function(e){var n=Math.floor(e.x/this.cellSize)*this.cellSize+this.cellSize/2,t=Math.floor(e.z/this.cellSize)*this.cellSize+this.cellSize/2;return new BABYLON.Vector3(n,0,t)}},{key:"_createCursor",value:function(){this.cursor=new s.default(this.scene,this.cellSize)}},{key:"_handleListeningForPosition",value:function(e){var n=this;this.cursor||this._createCursor();var t=this.scene.pick(e.clientX,e.clientY,function(e){return n.mesh.name===e.name});t.hit&&this.cursor.setDisplayPosition(this._getCellCenteredCoordinates(t.pickedPoint))}},{key:"_handleConfirmPosition",value:function(e){var n=this;return function(t){document.getElementById("render-canvas").removeEventListener("mousemove",n._handleListeningForPosition),document.getElementById("render-canvas").onClick=null,n.cursor.dispose(),n.cursor=null,e(n.cursor.gridPostion())}}}]),e}();n.default=a},function(e,n,t){"use strict";function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),r=function(){function e(n,t){i(this,e),this._displayPosition=new BABYLON.Vector3.Zero,this._mesh=new BABYLON.Mesh.CreatePlane("cursor",t,n),this._mesh.material=new BABYLON.StandardMaterial("mat1",n),this._mesh.material.diffuseColor=new BABYLON.Color3(.5,0,0),this._mesh.material.alpha=.9,this._mesh.rotation.x=Math.PI/2}return o(e,[{key:"setDisplayPosition",value:function(e){this._mesh.position=e,this._mesh.position.y=.02,console.log(this._mesh.position)}},{key:"gridPosition",value:function(){var e=this._mesh.position.clone();return e.y=0,e}},{key:"dispose",value:function(){this._mesh.dispose()}}]),e}();n.default=r}]);